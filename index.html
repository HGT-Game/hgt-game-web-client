<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>WebSocket</title>
</head>

<body>
    <button onclick="javaLogin();">1002 Java 登录</button>
    <button onclick="showLogin();" id="loginBtn">1002 登录</button>
    <button onclick="register();">1003 注册</button>
    <button>2001 获取大厅数据</button>
    <button onclick="createRoom();">2002 创建房间</button>
    <button onclick="joinRoom();">2003 加入房间</button>
    <button onclick="leaveRoom()">2004 离开房间</button>
    <button onclick="prepare();">2005 房间准备</button>
    <button onclick="endGame();">2010 游戏结束</button>
    <button onclick="test();">3000 测试</button>
    <br>
    <div id="recv"></div>

    <!-- 登录弹窗 -->
    <div id="login-div" style="display: none;">
        账号：<input type="text" id="account" value="sunanzhi@hotmail.com"> <br>
        密码：<input type="text" id="password" value="123456">
    </div>

    <!-- 创建房间 -->
    <div id="create-room" style="display: none;">
        房名：<input type="text" id="roomName" value="房间名"> <br>
        人数：<input type="number" id="roomMax" value="5"> <br>
        密码：<input type="text" id="roomPassword" value="123456">
    </div>

    <!-- 房间 -->
    <div id="room" style="display: none;border-style: solid; width: 45%; float: left;">
        <h4 id="showRoomName">房名：</h4>
        <h4 id="showRoomPassword">密码：</h4>
        <h4 id="showRoomMax">上限：</h4>
        <h4 id="showRoomId">房号：</h4>
        <div id="showRoomContent" style="border-style: solid; width: 100%; height: 300px; overflow:auto;"></div>
    </div>

    <!-- 对局 -->
    <div id="round" style="display: none;border-style: solid; width: 45%; float: left; padding-bottom: 20px;">
        <h4 id="roundQuesitonTitle">汤标题：</h4>
        <div id="roundMsgContent"
            style="border-style: solid; width: 100%; height: 300px; margin-bottom: 20px; overflow:auto;"></div>
        内容：<input type="text" id="sendMessage" placeholder="发送对局聊天" value=""> <button
            onclick="sendMessage();">发送</button>
    </div>

    <!-- 加入房间 -->
    <div id="join-room" style="display: none;">
        房号<input type="text" id="joinRoomId" value=""> <br>
        密码：<input type="text" id="joinRoomPassword" value="">
    </div>

    <!-- 选择问题 -->
    <div id="select-question" style="display: none;">
        <select name="" id="selectQuestionVal">
        </select>
    </div>

    <script src="static/jquery-3.5.1.js"></script>
    <script src="static/index.js"></script>
    <script src="static/layui/layui.js"></script>
    <script src="static/protobuf.js"></script>
    <script type="text/javascript">
        // api请求根
        // var API_DOMAIN = "http://localhost:8899"
        var API_DOMAIN = getUrlParam("api_domain")
        // wss连接根
        // var WSS_DOMAIN = "ws://localhost:8899/wss"
        var WSS_DOMAIN = getUrlParam("wss_domain")
        // layer 初始化
        layui.use(['layer', 'form'], function () {
            var layer = layui.layer
        });
        var USER_ID = ""
        var USERNAME = ""
        var IS_WEBSOCKET = false
        // 是否登录标签
        var IS_LOGIN = false
        // 是否创建过房间
        var IS_CREATE_ROOME = false
        // 是否已经房间
        var IS_IN_ROOM = false
        // 是否mc
        var IS_MC = false
        var MC_ID = ""
        // websocket
        var websocket

        function getUrlParam(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
            var r = window.location.search.substr(1).match(reg);  //匹配目标参数
            if (r != null) return unescape(r[2]); return null; //返回参数值
        }
    </script>
</body>

</html>