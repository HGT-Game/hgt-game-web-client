<!DOCTYPE>
<html>

<head>
    <title>海龟汤游戏</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="keywords" content="海龟汤,海龟汤在线,海龟汤游戏,海龟汤在线游戏,文字推理,文字推理游戏,脑洞推理,脑洞推理游戏" />
    <meta name="description" content="海龟汤,海龟汤在线,海龟汤游戏,海龟汤在线游戏,文字推理,文字推理游戏,脑洞推理,脑洞推理游戏" />
    <meta http-equiv="expires" content="0">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <link rel="stylesheet" href="//static.sunanzhi.com/hgt/assets/css/main.css" />
    <script>
        var now = new Date().getTime();
        document.write('<link href="static/css/index.css?t=' + now + '" rel="stylesheet" type="text/css"/>');
    </script>
    <link rel="shortcut icon" href="favicon.ico">
</head>

<body class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper">
        <!-- Header -->
        <header id="header">
            <div class="logo">
                <span class="icon fa-play-circle" style="color: #670000c9;" title="快速加入游戏" onclick="roomHall();"></span>
            </div>
            <div class="content">
                <div class="inner">
                    <h1 onclick="test();">海龟汤游戏</h1>
                    <p>其玩法系由出题者提出一个难以理解的事件，参与猜题者可以提出任何问题以试图缩小范围并找出事件背后真正的原因，但出题者仅能则以“是（对）”、“不是（不对）”、“是或不是（半对）”或“无关”来回答问题。
                    </p>
                </div>
            </div>
            <nav>
                <ul>
                    <li><a href="javascript:void(0)" onclick="menuCreateRoom();">创建房间</a></li>
                    <li><a href="javascript:void(0)" onclick="menuJoinRoom();">加入房间</a></li>
                    <li><a href="javascript:void(0)" onclick="roomHall();">房间列表</a></li>
                    <!-- <li><a href="/fish.html">工作主题</a></li> -->
                    <li><a href="#about">说明</a></li>
                    <!-- <li><a href="javascript:void(0)" onclick="menuFeedback();">联系我们</a></li> -->
                    <li id="show-logout-button" style="display: none;"><a href="javascript:void(9)"
                            onclick="showLogout();">退出</a></li>
                </ul>
            </nav>
        </header>

        <!-- Main -->
        <div id="main">
            <!-- 关于我们 -->
            <article id="about" class="fixed-pop-ups" style="padding: 20px;">
                <h2 class="major">关于我们</h2>
                <p>一个东凑西凑的团队，丝毫没有梦想的废鱼，更新迭代全靠与伪产品开撕。</p>
                <h2 class="major">说明</h2>
                <ul>
                    <li>人数需要 >=3 人才能开始，最多不能超过10人</li>
                    <li>游戏时长 >=5分钟 才可以结束</li>
                    <li>部分故事会带有一点恐怖元素，玩家尽情发挥自己脑洞的同时也要注意自己的用词</li>
                    <li>当MC掉线 >=3分钟 未重连，玩家可以退出游戏</li>
                    <li>玩家点击内容默认视为添加笔记</li>
                    <li>因游戏支持重连，因此出现什么意想不到的bug请刷新即可（理论可以修复大部分bug）</li>
                    <li>考虑游戏的成长，我们会定期维护以及推出新功能</li>
                </ul>
                <h2 class="major">游戏发展</h2>
                <ul>
                    <li>2020.12.01 web版删档公测</li>
                    <li>微信小程序版已立项</li>
                    <li>敬请期待...</li>
                </ul>
                <h2 class="major">图标说明</h2>
                <div class="icon-description">
                    <p><i class="icon solid fa-check-circle"></i> 对/不是/已准备</p>
                    <p><i class="icon solid fa-times-circle"></i> 错/否/未准备</p>
                    <p><i class="icon solid fa-trash-alt"></i> 删除操作</p>
                    <p><i class="icon solid fa-paper-plane"></i> 发送</p>
                    <p><i class="icon solid fa-chevron-down"></i> 展开</p>
                    <p><i class="icon solid fa-chevron-up"></i> 缩回</p>
                    <p><i class="icon solid fa-file-alt"></i> 笔记</p>
                    <p><i class="icon solid fa-question-circle"></i> 汤底</p>
                </div>
                <h2 class="major">成员组成</h2>
                <ul>
                    <li>决策：张牛逼</li>
                    <li>制作：水玉</li>
                    <li>美术：Grey Chan</li>
                    <li>端水：Alan</li>
                    <li>技术：MorsTiin</li>
                </ul>
            </article>

            <!-- 大厅房间列表 -->
            <article id="room-hall">
                <h3 class="major">房间列表</h3>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>房名</th>
                                <th>人数</th>
                                <th>房号</th>
                            </tr>
                        </thead>
                        <tbody id="room-hall-content">
                        </tbody>
                    </table>
                </div>
            </article>
            <!-- 加入房间 -->
            <article id="join-room">
                <h2 class="major">加入房间</h2>
                <form action="#">
                    <div class="fields">
                        <div class="field">
                            <label>房间号</label>
                            <input type="text" id="join-room-id" placeholder="请输入房号" />
                        </div>
                        <div class="field">
                            <label>密码</label>
                            <input type="text" id="join-room-password" placeholder="请输入房间密码" />
                        </div>
                    </div>
                    <ul class="actions">
                        <li><input type="button" value="加入房间" class="primary" onclick="confirmJoinRoom();" /></li>
                    </ul>
                </form>
            </article>
            <!-- 创建房间 -->
            <article id="create-room">
                <h2 class="major">创建房间</h2>
                <form action="#">
                    <div class="fields">
                        <div class="field">
                            <label>房间名</label>
                            <input type="text" id="create-room-name" placeholder="请输入房间名" />
                        </div>
                        <div class="field">
                            <label>密码</label>
                            <input type="text" id="create-room-password" placeholder="请输入房间密码（可选）" />
                        </div>
                    </div>
                    <ul class="actions">
                        <li><input type="button" value="创建房间" class="primary" onclick="createRoom();" /></li>
                    </ul>
                </form>
            </article>
            <!-- 房间 -->
            <article id="room-prepare" class="fixed-pop-ups" style="padding: 20px;">
                <h2 class="major" id="room-prepare-name">房间名</h2>
                <p>房号：<span id="room-prepare-id"></span></p>
                <p>上限：<span id="room-prepare-max"></span>人</p>
                <hr>
                <ul class="icons" id="room-prepare-member">
                </ul>
                <ul class="actions dialogue-actions">
                    <li><input type="button" value="离开房间" class="primary" onclick="leaveRoom('room-prepare');" /></li>
                    <li><input id="room-prepare-button" type="button" value="准备/取消" onclick="prepare();" /></li>
                </ul>
            </article>
            <!-- 用户头像点击内容 -->
            <article id="room-member-info" class="fixed-pop-ups" style="padding: 20px;">
                <h2 class="major">用户信息</h2>
                <p>用户编号：<span id="room-member-id"></span></p>
                <p>用户名：<span id="room-member-username"></span></p>
                <ul class="actions dialogue-actions">
                    <li id="room-member-note"><input type="button" value="查看笔记" class="primary" onclick="viewNotes();" /></li>
                    <li><input type="button" value="关闭" onclick="closeMemberInfo();" /></li>
                    <li id="show-kick-button" style="display: none;"><input type="button" value="踢出房间" class="primary"
                            onclick="kickRoom();" /></li>
                </ul>
            </article>
            <!-- 退出房间-->
            <article id="leave-room" class="fixed-pop-ups" style="padding: 20px;">
                <h2 class="major">退出房间</h2>
                <input type="hidden" id="cancel-leave-id" value="" />
                <ul class="actions dialogue-actions">
                    <li><input type="button" value="确认离开" class="primary" onclick="leaveRoomConfirm();" /></li>
                    <li><input type="button" value="取消" onclick="cancelLeaveRoom();" /></li>
                </ul>
            </article>
            <!-- 选题 -->
            <article id="select-question" class="fixed-pop-ups" style="padding: 20px;">
                <h2 class="major">选汤普</h2>
                <div id="question-list">
                </div>
            </article>
            <!-- 游戏页面 -->
            <article id="game-round" class="fixed-pop-ups" style="padding: 20px;">
                <i class="icon solid fa-bars" onclick="showRoundMenu();"></i>
                <div style="width: 100%; height: 25px;">
                    <div id="game-round-title-div">
                        <h2 class="major" id="game-round-title">汤标题</h2>
                    </div>
                    <i id="game-question-chevron-down" style="display: none; float: right;"
                        class="icon solid fa-chevron-down" onclick="showGameQuestion();"></i>
                    <i id="game-question-chevron-up" style="float: right;" class="icon solid fa-chevron-up"
                        onclick="closeGameQuestion();"></i>
                </div>
                <p class="game-question-show" id="game-round-question-description">汤面</p>
                <hr style="margin: 20px 0 20px 0;">
                <div class="game-round-message-list" id="game-round-message-div">
                    <ul class="icons" id="game-round-message-list">
                    </ul>
                </div>
                <hr style="margin: 10px 0 10px 0;">
                <ul class="actions dialogue-actions">
                    <li style="position: relative;">
                        <i id="show-game-notes" class="icon solid fa-file-alt" style="font-size: 25px; width: 30px;
                            position: absolute;display: none;" onclick="showMyNotes();"></i>
                        <i id="show-game-content" class="icon solid fa-question-circle" style="font-size: 25px; width: 30px;
                            position: absolute;display: none;" onclick="showGameContent();"></i>
                        <input style="width: 88%;
                        float: right;" type="text" id="game-round-message" placeholder="提问的内容" />
                        <i style="position: absolute;
                        right: 10px;
                        top: 8px;
                        width: 20px;
                        opacity: 0.7;" class="icon solid fa-paper-plane" onclick="sendMessage();"></i>
                    </li>
                </ul>
            </article>
            <!-- 对局菜单 -->
            <article id="game-round-menu">
                <h2 class="major">对局菜单</h2>
                <ul class="actions dialogue-actions" style="margin-bottom: 20px;">
                    <li><input type="button" value="返回游戏" onclick="closeRoundMenu();" /></li>
                    <li id="end-game-button" style="display: none;"><input type="button" value="结束游戏" class="primary"
                            onclick="endGame();" /></li>
                    <li id="leave-game-button" style="display: none;"><input type="button" value="离开游戏"
                            onclick="leaveRoom('game-round');" /></li>
                </ul>
            </article>
            <!-- 回答问题 -->
            <article id="answer-message" class="fixed-pop-ups" style="padding: 20px;">
                <h2 class="major">回答</h2>
                <p id="answer-message-content"></p>
                <input type="hidden" id="answer-message-id" value="" />
                <ul class="actions dialogue-actions">
                    <li><input type="button" value="取消回答" class="primary" onclick="replyMessage(1);" /></li>
                    <li><input type="button" value="不相关" onclick="replyMessage(2);" /></li>
                    <li><input type="button" value="是" class="primary" onclick="replyMessage(3);" /></li>
                    <li><input type="button" value="不是" onclick="replyMessage(4);" /></li>
                    <li><input type="button" value="是或不是" class="primary" onclick="replyMessage(5);" /></li>
                </ul>
            </article>
            <!-- 查看笔记 -->
            <article id="user-notes" class="fixed-pop-ups" style="padding: 20px;">
                <h2 class="major"><span id="note-user-name"></span>的笔记</h2>
                <input type="hidden" name="" id="delete-user-note-id">
                <ul class="alt" id="user-note-list">
                </ul>
                <ul class="actions dialogue-actions">
                    <li id="show-add-customize-note-button" style="display: none;"><input type="button" value="添加笔记"
                            class="primary" onclick="addCustomizeNote();" /></li>
                    <li><input type="button" value="关闭" onclick="closeUserNote();" /></li>
                </ul>
            </article>
            <!-- 添加自定义笔记 -->
            <article id="add-customize-note" class="fixed-pop-ups" style="padding: 20px;">
                <h2 class="major">自定义笔记</h2>
                <form method="post" action="#">
                    <div class="fields">
                        <div class="field">
                            <input type="text" id="customize-note-content" placeholder="内容" />
                        </div>
                    </div>
                    <ul class="actions dialogue-actions">
                        <li><input type="button" value="确认" class="primary" onclick="addCustomizeNoteConfirm();" /></li>
                        <li><input type="button" value="关闭" onclick="closeCustomizeNote();" /></li>
                    </ul>
                </form>
            </article>
            <!-- 结束游戏 -->
            <article id="end-game" class="fixed-pop-ups" style="padding: 20px;">
                <h2 class="major">结束游戏</h2>
                <ul class="actions dialogue-actions">
                    <li><input type="button" value="确认" class="primary" onclick="endGameConfirm();" /></li>
                    <li><input type="button" value="取消" onclick="cancelEndGame();" /></li>
                </ul>
            </article>
            <!-- 查看汤底 -->
            <article id="show-game-question-content" class="fixed-pop-ups" style="padding: 20px;">
                <h2 class="major">汤底</h2>
                <p id="check-game-content"></p>
                <ul class="actions dialogue-actions">
                    <li><input type="button" value="关闭" class="primary" onclick="closeGameContent();" /></li>
                </ul>
            </article>
            <!-- 呈现汤底 -->
            <article id="game-question-content" class="fixed-pop-ups" style="padding: 20px;">
                <h2 class="major">汤底</h2>
                <p></p>
                <ul class="actions dialogue-actions">
                    <li><input type="button" value="关闭" class="primary" onclick="roomPrepare();" /></li>
                </ul>
            </article>
            <!-- 联系我们 -->
            <article id="feedback">
                <h2 class="major">联系我们</h2>
                <form method="post" action="#">
                    <div class="fields">
                        <div class="field">
                            <textarea id="feedback-content" rows="4" placeholder="请输入内容"></textarea>
                        </div>
                    </div>
                    <ul class="icons">
                        <li><a href="https://github.com/HGT-Game" class="icon brands fa-github"><span
                                    class="label">GitHub</span></a></li>
                        <li><a href="https://weibo.com/zsunanzhi" class="icon brands fa-weibo"><span
                                    class="label">Weibo</span></a></li>
                    </ul>
                    <ul class="actions">
                        <li><input type="button" value="确认" class="primary" onclick="feedback();" /></li>
                        <li><input type="reset" value="重置" /></li>
                    </ul>
                </form>
            </article>
            <!-- 游客模式 -->
            <article id="tourist-login">
                <h2 class="major">游客登录</h2>
                <form action="#">
                    <div class="fields">
                        <div class="field">
                            <label>昵称</label>
                            <input type="text" id="tourist-username" placeholder="游戏昵称" />
                        </div>
                        <div class="field">
                            <label>验证码</label>
                            <input type="text" id="tourist-captcha" placeholder="输入验证码" />
                            <br>
                            <input type="hidden" id="tourist-captcha-id" value="">
                            <img id="tourist-captcha-image" width="130px" height="40px"
                                style="background-color: aliceblue;border-radius: 4px;" src=""
                                onclick="changeCaptcha();" alt="">
                        </div>
                    </div>
                    <ul class="actions">
                        <li><input type="button" value="登录" class="primary" onclick="touristLogin();" /></li>
                    </ul>
                    <a href="#login" style="font-size: 14px;">已有账号？点我登录</a>
                </form>
            </article>
            <!-- 账号密码登录 -->
            <article id="login">
                <h2 class="major">账号登录</h2>
                <form action="#">
                    <div class="fields">
                        <div class="field">
                            <label>账号</label>
                            <input type="text" id="account" placeholder="邮箱/手机号" />
                        </div>
                        <div class="field">
                            <label>密码</label>
                            <input type="password" id="password" placeholder="请输入密码" />
                        </div>
                    </div>
                    <ul class="actions">
                        <li><input type="button" value="登录" class="primary" onclick="login('login');" /></li>
                    </ul>
                    <div class="fields">
                        <div class="field">
                            <label for="name" style="display: contents;"><a href="#login-by-code"
                                    style="font-size: 14px;">验证码登录</a></label>
                            <label for="name" style="display: contents;"><a href="#register"
                                    style="font-size: 14px; float: right;">没有账号？点我注册</a></label>
                        </div>
                    </div>
                </form>
            </article>
            <!-- 验证码登录 -->
            <article id="login-by-code">
                <h2 class="major">验证码登录</h2>
                <form action="#">
                    <div class="fields">
                        <div class="field">
                            <label for="email">账号</label>
                            <input type="text" id="login-account" placeholder="邮箱/手机号" />
                        </div>
                        <div class="field">
                            <label for="name">验证码</label>
                            <input type="text" id="login-code" placeholder="请输入收到的验证码" />
                        </div>
                    </div>
                    <ul class="actions">
                        <li><input type="button" value="发送验证码" onclick="sendCode('login');" /></li>
                        <li><input type="button" value="登录" class="primary" onclick="login('code')" /></li>
                    </ul>
                    <div class="fields">
                        <div class="field">
                            <label for="name" style="display: contents;"><a href="#login"
                                    style="font-size: 14px;">账号密码登录</a></label>
                            <label for="name" style="display: contents;"><a href="#register"
                                    style="font-size: 14px; float: right;">没有账号？点我注册</a></label>
                        </div>
                    </div>
                </form>
            </article>
            <!-- 注册 -->
            <article id="register">
                <h2 class="major">注册</h2>
                <form action="#">
                    <div class="fields">
                        <div class="field">
                            <label>昵称</label>
                            <input type="text" id="register-username" placeholder="昵称" />
                        </div>
                        <div class="field">
                            <label>账号</label>
                            <input type="text" id="register-account" placeholder="邮箱/手机号" />
                        </div>
                        <div class="field">
                            <label>密码</label>
                            <input type="password" id="register-password" placeholder="请输入密码" />
                        </div>
                        <div class="field">
                            <label>验证码</label>
                            <input type="text" id="register-code" placeholder="请输入收到的验证码" />
                        </div>
                    </div>
                    <ul class="actions">
                        <li><input type="button" value="发送验证码" onclick="sendCode('register');" /></li>
                        <li><input type="button" value="注册" class="primary" onclick="register();" /></li>
                    </ul>
                    <a href="#login" style="font-size: 14px;">已有账号？点我登录</a>
                </form>
            </article>
            <!-- 退出登录 -->
            <article id="logout-options" class="fixed-pop-ups" style="padding: 20px;">
                <h2 class="major">退出</h2>
                <p></p>
                <ul class="actions dialogue-actions">
                    <li><input type="button" value="确认" class="primary" onclick="logout();" /></li>
                </ul>
            </article>
            <!-- 提示外界浏览器打开 -->
            <article id="weixin-broswer" class="fixed-pop-ups" style="padding: 20px;">
                <h2 class="major">提示</h2>
                <p>如需浏览，可使用外置浏览器打开此站点。（微信小程序版即将推出）</p>
            </article>
        </div>

        <!-- Footer -->
        <footer id="footer">
            <p class="copyright"><a href="javascript:void(0)" onclick="menuFeedback();">联系我们</a></p>
            <p class="copyright">加入QQ：<a href="https://jq.qq.com/?_wv=1027&k=9kLPr9Zb">727986995</a></p>
            <p class="copyright">© 2020 <a href="https://beian.miit.gov.cn/">粤ICP备18084253号</a></p>
            <div style="margin-top: 5px;">
                <p class="copyright">
                    <span>
                        感谢以下平台提供CDN加速支持
                    </span>
                </p>
                <p style="margin-top: 3px;">
                    <a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank"
                        rel="nofollow" sponsor="upyun">
                        <img style="height: 25px;" src="//static.sunanzhi.com/image/cooperation/logo/upyun-white.png"
                            alt="upyun">
                    </a>
                </p>
            </div>
        </footer>
    </div>

    <!-- BG -->
    <div id="bg"></div>

</body>

</html>
<script src="//static.sunanzhi.com/js/jquery-3.5.1.js"></script>
<script src="//static.sunanzhi.com/hgt/assets/js/browser.min.js"></script>
<script src="//static.sunanzhi.com/hgt/assets/js/breakpoints.min.js"></script>
<script src="//static.sunanzhi.com/hgt/assets/js/util.js"></script>
<script src="//static.sunanzhi.com/hgt/assets/js/main.js"></script>
<script src="//static.sunanzhi.com/js/layui/layui.js"></script>
<script src="//static.sunanzhi.com/js/protobuf/protobuf.js"></script>
<script type="text/javascript">
    document.write('<script src="static/main.js?timestamp=' + new Date().getTime() + '" type="text/javascript" charset="utf-8">	<\/script>');
    document.write('<script src="static/game.js?timestamp=' + new Date().getTime() + '" type="text/javascript" charset="utf-8">	<\/script>');
</script>
<script>
    // 监听页面刷新
    window.onload = function (event) {
        // 对浏览器的UserAgent进行正则匹配，不含有微信独有标识的则为其他浏览器
        var useragent = navigator.userAgent;
        if (useragent.match(/MicroMessenger/i) == 'MicroMessenger') {
            // 这里警告框会阻塞当前页面继续加载
            $("#weixin-broswer").find(".close").remove()
            window.location = "/index.html#weixin-broswer"
        } else {
            if (window.location.hash != "") {
                window.location = "/index.html"
            }
        }
    }
    var host = window.location.host
    if (host == "test.develop") {
        var API_DOMAIN = "http://localhost:8899"
        var WSS_DOMAIN = "ws://localhost:8898/wss"
    } else {
        var API_DOMAIN = "https://api.sunanzhi.com"
        var WSS_DOMAIN = "wss://api.sunanzhi.com/wss"
    }
    // layer 初始化
    layui.use(['layer'], function () {
        var layer = layui.layer
    });
    // websocket 对象
    var WEBSOCKET_OBJ
    // websocket是否连接
    var WEBSOCKET_CONNECT = false
    // 是否准备
    var IS_PREPARE = false
    // 是否mc
    var IS_MC = false
    // 是否房主
    var IS_OWNER = false
    // 房间状态
    var ROOM_IS_GAMING = false
    // 是否查看别人笔记
    var VIEW_OTHER_NOTE_USERNAME = ''

    if (localStorage.getItem("token")) {
        if (WEBSOCKET_CONNECT == false) {
            gameServer(localStorage.getItem("token"))
        }
        $("#show-logout-button").css('display', "block")
    } else {
        $("#show-logout-button").hide()
    }
</script>