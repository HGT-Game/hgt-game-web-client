<!DOCTYPE>
<html>
<head>
    <title>工作指南</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="keywords" content="海龟汤,海龟汤游戏,文字推理,文字推理游戏,脑洞推理,脑洞推理游戏" />
    <meta name="description" content="海龟汤,海龟汤游戏,文字推理,文字推理游戏,脑洞推理,脑洞推理游戏" />
    <link rel="shortcut icon" href="favicon.ico">
</head>
<body>
    <div style="height: 100%; width: 100%; float: left;">
        <div style="height: 4%; width: 100%;"">
            <input type=" text" placeholder="高效工作识别地址" id="fish-url" />
        <button onclick="setFishContent();">确认</button>
        <button onclick="showGame();">小窗模式</button>
        <button onclick="setFishContent();"><a href="/index.html" target="_blank">专注模式</a> </button>
        <button>快捷键 alt + c</button>
    </div>
    <iframe id="fish-content" style="height: 95%; width: 100%;" src="" frameborder="0"></iframe>
    </div>
</body>
</html>
<script src="//static.sunanzhi.com/js/jquery-3.5.1.js"></script>
<script src="//static.sunanzhi.com/js/layui/layui.js"></script>
<script>
    // layer 初始化
    layui.use(['layer', 'form'], function () {
        var layer = layui.layer
    });
    var gameLayer = null
    // 0 未开始游戏 1：还原 2：小化
    var maxminFlag = 0
    document.onkeydown = function (event) {
        //获取键盘的keyCode值
        const keyCode = event.keyCode || event.which || event.charCode
        //获取ctrl 键对应的事件属性
        const keyCombination = event.altKey
        if (keyCode == 67 && keyCombination) {
            // alt + c
            // 小化 还原 开始游戏
            if (gameLayer != null) {
                if(maxminFlag == 1) {
                    layer.min(gameLayer)
                    maxminFlag = 2
                } else {
                    layer.restore(gameLayer)
                    maxminFlag = 1
                }
            } else {
                showGame();
                maxminFlag = 1
            }
        }

    }
    
    setFishContent();
    // 回车发送
    $("#fish-url").on('keypress', function (event) {
        if (event.keyCode == 13) {
            setFishContent()
        }
    });

    // 设置iframe内容
    function setFishContent() {
        let url = $("#fish-url").val()
        if (url == "") {
            url = "https://36kr.com/p/1722571866113"
        }
        parent.document.getElementById('fish-content').src = url
    }

    // 开始游戏
    function showGame() {
        gameLayer = layer.open({
            type: 2,
            title: '广告',
            shadeClose: false,
            shade: 0,
            offset: 'rb',
            maxmin: true,
            resize: true,
            area: ['380px', '60%'],
            content: '/index.html',
            cancel: function (index, layero) {
                gameLayer = null
                return false;
            }
        });
    }

    setTimeout(() => {
        if (localStorage.getItem("token")) {
            showGame()
        }
    }, 2000);

</script>